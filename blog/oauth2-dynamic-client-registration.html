<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>OAuth2.0 动态注册客户端</title><meta name="robots" content="follow, index"/><meta name="description"/><meta property="og:url" content="/blog/oauth2-dynamic-client-registration"/><meta property="og:type" content="article"/><meta property="og:site_name" content="ReLive27 Blog"/><meta property="og:description"/><meta property="og:title" content="OAuth2.0 动态注册客户端"/><meta property="og:image" content="/static/images/banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/Twitter"/><meta name="twitter:title" content="OAuth2.0 动态注册客户端"/><meta name="twitter:description"/><meta name="twitter:image" content="/static/images/banner.png"/><link rel="canonical" href="/blog/oauth2-dynamic-client-registration"/><meta property="article:published_time" content="2024-11-05T22:00:29.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/blog/oauth2-dynamic-client-registration"
  },
  "headline": "OAuth2.0 动态注册客户端",
  "image": [
    {
      "@type": "ImageObject",
      "url": "/static/images/banner.png"
    }
  ],
  "datePublished": "2024-11-05T22:00:29.000Z",
  "dateModified": "2024-11-05T22:00:29.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "ReLive27"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "ReLive27",
    "logo": {
      "@type": "ImageObject",
      "url": "/static/images/logo.png"
    }
  }
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/777c5391009ba2be.css" as="style"/><link rel="stylesheet" href="/_next/static/css/777c5391009ba2be.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-65155c403e12a155.js" defer=""></script><script src="/_next/static/chunks/main-5d59ea0016b7898d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-79185c7751ab0567.js" defer=""></script><script src="/_next/static/chunks/675-415f2ef004e9374e.js" defer=""></script><script src="/_next/static/chunks/811-09b059e602669e04.js" defer=""></script><script src="/_next/static/chunks/410-126bb4b3a7c18944.js" defer=""></script><script src="/_next/static/chunks/1-8328c5445f547d8d.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-a331338351da50bc.js" defer=""></script><script src="/_next/static/AH509NuGZf1cFgZuj9XBY/_buildManifest.js" defer=""></script><script src="/_next/static/AH509NuGZf1cFgZuj9XBY/_ssgManifest.js" defer=""></script><script src="/_next/static/AH509NuGZf1cFgZuj9XBY/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="ReLive27" href="/"><div class="flex items-center justify-between"><div class="hidden h-6 text-2xl font-semibold sm:block">ReLive27</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/">Home</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/">Home</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2024-11-05T22:00:29.000Z">2024年11月5日星期二</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">OAuth2.0 动态注册客户端</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="../static/images/avatar.png?imwidth=48 1x, ../static/images/avatar.png?imwidth=96 2x" src="../static/images/avatar.png?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">ReLive27</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="什么是-oauth-20-客户端自动注册"><a href="#什么是-oauth-20-客户端自动注册" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>什么是 OAuth 2.0 客户端自动注册？</h2><p>OAuth 2.0 客户端注册通常是在授权服务器的管理界面或通过静态配置文件手动完成的。客户端自动注册是指应用在启动或运行过程中通过代码与 OAuth 2.0 授权服务器交互，自动注册并获取 <code>client_id</code> 和 <code>client_secret</code> 等必要的认证信息。这个过程不仅简化了客户端的管理，还允许系统在不同上下文中动态创建和配置客户端。</p><h2 id="客户端自动注册的典型场景"><a href="#客户端自动注册的典型场景" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>客户端自动注册的典型场景</h2><p>客户端自动注册适用于以下场景：</p><ol><li><strong>多租户应用</strong>：每个租户都有独立的客户端配置，系统需要为每个租户动态创建 OAuth 客户端。</li><li><strong>微服务架构</strong>：微服务可能在部署过程中需要注册自己的客户端，以便与授权服务器通信。</li><li><strong>动态环境</strong>：系统需要在运行时根据需求注册和配置不同的客户端，而不是提前硬编码配置。</li></ol><h2 id="动态客户端注册的流程"><a href="#动态客户端注册的流程" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>动态客户端注册的流程</h2><p>OAuth 2.0 动态客户端注册流程使得客户端能够通过API动态注册自身，而无需手动操作。这一过程涉及多个步骤，确保客户端能够与授权服务器有效通信并获得必要的凭证信息。以下是动态客户端注册的详细流程说明：</p><h3 id="1-客户端发送注册请求"><a href="#1-客户端发送注册请求" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. <strong>客户端发送注册请求</strong></h3><p>客户端想要动态注册时，会向授权服务器发送一个HTTP <code>POST</code>请求。该请求包含关于客户端的基本信息，通常为JSON格式。请求的内容根据具体应用的需求可能有所不同，但主要包括以下信息：</p><ul><li><code>client_name</code>：客户端的名称，通常是易于识别的应用名。</li><li><code>redirect_uris</code>：回调URL列表，授权服务器在授权码授权流程中会使用该URL。</li><li><code>grant_types</code>：客户端支持的授权类型，例如<code>authorization_code</code>、<code>client_credentials</code>等。</li><li><code>response_types</code>：客户端期望的响应类型，如<code>code</code>（授权码）。</li><li><code>scope</code>：客户端请求的权限范围。</li><li><code>token_endpoint_auth_method</code>：客户端将如何在令牌端点进行身份验证，常见的方式有<code>client_secret_basic</code>、<code>client_secret_post</code>等。</li><li><code>token_endpoint_auth_signing_alg</code>：客户端在<strong>令牌端点</strong>进行身份验证时使用的签名算法。</li><li><code>jwks_uri</code>：公钥信息URL，当客户端身份验证方式为<code>private_key_jwt</code>，客户端需要提供公钥信息URL。</li></ul><h4 id="示例请求"><a href="#示例请求" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>示例请求：</h4><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;client_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SampleApp&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;redirect_uris&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://client.example.com/callback&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;grant_types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;authorization_code&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;response_types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;scope&quot;</span><span class="token operator">:</span> <span class="token string">&quot;openid profile email&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;token_endpoint_auth_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;client_secret_basic&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;token_endpoint_auth_signing_alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RS256&quot;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="2-授权服务器验证请求"><a href="#2-授权服务器验证请求" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. <strong>授权服务器验证请求</strong></h3><p>授权服务器在接收到客户端的注册请求后，会对请求内容进行验证：</p><ul><li><strong>校验字段格式</strong>：检查提交的数据是否符合预期的格式和标准。比如，回调URL是否是有效的URL格式，授权类型是否在支持的范围内。</li><li><strong>策略验证</strong>：授权服务器可以根据其内部策略决定是否允许注册特定类型的客户端。例如，某些服务器可能只允许预先批准的客户端进行注册。</li></ul><h3 id="3-授权服务器生成客户端凭证"><a href="#3-授权服务器生成客户端凭证" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. <strong>授权服务器生成客户端凭证</strong></h3><p>如果注册请求通过验证，授权服务器会为客户端生成必要的凭证信息，包括：</p><ul><li><code>client_id</code>：唯一标识客户端的ID，通常是由授权服务器随机生成的字符串。</li><li><code>client_secret</code>：客户端密钥，在需要认证的授权类型中使用（例如客户端凭证授权类型）。同样是随机生成并安全存储。</li><li>其他属性如<code>client_id_issued_at</code>（客户端ID生成时间）、<code>client_secret_expires_at</code>（客户端密钥的过期时间，如果有）等。</li></ul><p>生成这些信息后，授权服务器会将客户端的注册信息存储在其内部数据库中。</p><h3 id="4-授权服务器返回注册响应"><a href="#4-授权服务器返回注册响应" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>4. <strong>授权服务器返回注册响应</strong></h3><p>在生成客户端凭证后，授权服务器会将客户端信息作为HTTP响应返回给客户端，通常也是以JSON格式提供。返回的响应将包含以下信息：</p><ul><li><code>client_id</code>：客户端的唯一ID。</li><li><code>client_secret</code>：客户端密钥（如果存在）。</li><li><code>client_secret_expires_at</code>：客户端密钥的过期时间（如果适用）。</li><li><code>client_id_issued_at</code>：客户端ID的生成时间。</li><li>其他可选的注册信息（如Logo URI、政策URL等）。</li></ul><h4 id="示例响应"><a href="#示例响应" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>示例响应：</h4><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">&quot;settings.client.require-authorization-consent&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;grant_types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token string">&quot;authorization_code&quot;</span>
</span><span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;registration_client_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://127.0.0.1:8080/connect/register?client_id=ECnm9EdfP44eGV2KmF2J_C5ERw_5rY4_LR-vSKZDJuM&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;redirect_uris&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token string">&quot;http://120.0.0.1:8070/callback&quot;</span>
</span><span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;client_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ECnm9EdfP44eGV2KmF2J_C5ERw_5rY4_LR-vSKZDJuM&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;token_endpoint_auth_method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;client_secret_basic&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;scope&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LOGIN&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;client_id_issued_at&quot;</span><span class="token operator">:</span> <span class="token number">1729435078</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;client_secret&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sc6FzJ-azjcZ_W6cKMS_jb1tAEiZpVD__y9tQhgj6Zq8wySXM6GWX7QG-H8w0YZX&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;client_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;client_1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;settings.client.require-proof-key&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;response_types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token string">&quot;code&quot;</span>
</span><span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;id_token_signed_response_alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RS256&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;registration_access_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eyJraWQiOiI2ODBmNTVlOC1lMmZhLTQ0Y2UtYTZlYi1mMGNmNGZjYmNiOTAiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJFQ25tOUVkZlA0NGVHVjJLbUYySl9DNUVSd181clk0X0xSLXZTS1pESnVNIiwiYXVkIjoiRUNubTlFZGZQNDRlR1YyS21GMkpfQzVFUndfNXJZNF9MUi12U0taREp1TSIsIm5iZiI6MTcyOTQzNTA3OCwic2NvcGUiOlsiY2xpZW50LnJlYWQiXSwiaXNzIjoiaHR0cDovLzEyNy4wLjAuMTo4MDgwIiwiZXhwIjoxNzI5NDM1Mzc4LCJpYXQiOjE3Mjk0MzUwNzgsImp0aSI6ImYxNGE4NTY2LTgxM2UtNGFiZS04Njc3LTc0ZDE2ZjBjMmI1YSJ9.R92KEFzL9is7-wuBTXygT-7l6DEmtv6VArKv1jpmpLQwU4nULB878FqecMti_dEeUVTQ5GXvtBey49Fcld8vaqAjLPTkXp7M7J0UQ6auWSrjoDXlfyHVf5KODExiKmbcxqnrLCphCw2TBok848gcbpJIhTRJknsc6SqU7rbzp68_WY2y3L7PujPjq8B9kD2L9rvlHFw3qCi1Pd2eQ7GlL3e_dCDD7CEBXKSeMhOfv_BGrGTG_Iikd_8vDty6nGxGCyTP1e0JRdzwdIj8JmvK1HgIV0w4zq6bU3ipSmM3UJk2qUqcfH_z9KZ5yj9kIFpKjZNMgT_MxllKzlvJ-vnxtw&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;client_secret_expires_at&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="5-客户端使用注册信息"><a href="#5-客户端使用注册信息" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>5. <strong>客户端使用注册信息</strong></h3><p>客户端在获得<code>client_id</code>和<code>client_secret</code>后，可以使用这些信息向授权服务器发起OAuth 2.0相关请求（例如获取访问令牌）。每个后续请求都会携带这些凭证信息，授权服务器会根据客户端的身份验证方式验证请求。</p><ul><li>在授权码流程中，客户端会使用<code>client_id</code>和<code>client_secret</code>来换取访问令牌。</li><li>在客户端凭证流程中，客户端直接用这些信息与授权服务器交换访问令牌。</li></ul><h2 id="使用-spring-authorization-server-实现动态客户端注册"><a href="#使用-spring-authorization-server-实现动态客户端注册" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用 Spring Authorization Server 实现动态客户端注册</h2><p>为了在项目中实现动态客户端注册功能，可以使用Spring Authorization Server实现授权服务来支持OAuth 2.0的动态客户端注册。</p><h3 id="项目依赖"><a href="#项目依赖" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>项目依赖</h3><div class="relative"><pre><code class="code-highlight language-xml"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-security-oauth2-authorization-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-oauth2-resource-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</span></code></pre></div><h3 id="配置授权服务器"><a href="#配置授权服务器" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>配置授权服务器</h3><p>配置Spring Authorization Server 授权服务器，开启客户端动态注册。</p><div class="relative"><pre><code class="language-java code-highlight"><span class="code-line"><span class="token punctuation annotation">@Bean</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">authorizationServerSecurityFilterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token class-name">OAuth2AuthorizationServerConfiguration</span><span class="token punctuation">.</span><span class="token function">applyDefaultSecurity</span><span class="token punctuation">(</span>http<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 开启客户端注册端点</span>
</span><span class="code-line">    http<span class="token punctuation">.</span><span class="token function">getConfigurer</span><span class="token punctuation">(</span><span class="token class-name">OAuth2AuthorizationServerConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">oidc</span><span class="token punctuation">(</span>oidc <span class="token operator">-&gt;</span> oidc<span class="token punctuation">.</span><span class="token function">clientRegistrationEndpoint</span><span class="token punctuation">(</span>clientRegistrationEndpoint <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">                clientRegistrationEndpoint
</span><span class="code-line">                        <span class="token punctuation">.</span><span class="token function">authenticationProviders</span><span class="token punctuation">(</span><span class="token function">configureCustomClientMetadataConverters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 资源服务配置</span>
</span><span class="code-line">    http<span class="token punctuation">.</span><span class="token function">oauth2ResourceServer</span><span class="token punctuation">(</span>oauth2ResourceServer <span class="token operator">-&gt;</span>
</span><span class="code-line">            oauth2ResourceServer<span class="token punctuation">.</span><span class="token function">jwt</span><span class="token punctuation">(</span><span class="token class-name">Customizer</span><span class="token punctuation">.</span><span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 认证失败跳转到登录页面</span>
</span><span class="code-line">    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">exceptionHandling</span><span class="token punctuation">(</span>exceptions <span class="token operator">-&gt;</span> exceptions<span class="token punctuation">.</span>
</span><span class="code-line">            <span class="token function">authenticationEntryPoint</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginUrlAuthenticationEntryPoint</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="配置注册客户端"><a href="#配置注册客户端" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>配置注册客户端</h3><p>注册客户端用于向授权服务器注册新客户端。客户端必须配置范围<code>client.create</code>，并可选地<code>client.read</code>分别用于注册客户端和检索客户端。注册客户端用于在动态注册过程中获取初始访问令牌</p><div class="relative"><pre><code class="language-java code-highlight"><span class="code-line"><span class="token punctuation annotation">@Bean</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token class-name">RegisteredClientRepository</span> <span class="token function">registeredClientRepository</span><span class="token punctuation">(</span><span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token class-name">RegisteredClient</span> registrarClient <span class="token operator">=</span> <span class="token class-name">RegisteredClient</span><span class="token punctuation">.</span><span class="token function">withId</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">clientId</span><span class="token punctuation">(</span><span class="token string">&quot;registrar-client&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">clientSecret</span><span class="token punctuation">(</span><span class="token string">&quot;{noop}relive27-client&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">clientAuthenticationMethod</span><span class="token punctuation">(</span><span class="token class-name">ClientAuthenticationMethod</span><span class="token punctuation">.</span><span class="token constant">CLIENT_SECRET_BASIC</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">authorizationGrantType</span><span class="token punctuation">(</span><span class="token class-name">AuthorizationGrantType</span><span class="token punctuation">.</span><span class="token constant">CLIENT_CREDENTIALS</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">scope</span><span class="token punctuation">(</span><span class="token string">&quot;client.create&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">scope</span><span class="token punctuation">(</span><span class="token string">&quot;client.read&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token class-name">JdbcRegisteredClientRepository</span> jdbcRegisteredClientRepository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcRegisteredClientRepository</span><span class="token punctuation">(</span>jdbcTemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    jdbcRegisteredClientRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>registrarClient<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> jdbcRegisteredClientRepository<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="自定义客户端元数据"><a href="#自定义客户端元数据" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>自定义客户端元数据</h3><p>为了支持在注册客户端时可以增加一些参数，便于我们做一些额外的业务操作，可以自定义默认值<code>AuthenticationProvider</code>以支持自定义客户端元数据参数。以下示例显示了支持自定义客户端元数据参数<code>require-authorization-consent</code>和<code>require-proof-key</code>的实现。</p><div class="relative"><pre><code class="language-java code-highlight"><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationProvider</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">configureCustomClientMetadataConverters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> customClientMetadata <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;require-authorization-consent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;require-proof-key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span>authenticationProviders<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token class-name">CustomRegisteredClientConverter</span> registeredClientConverter <span class="token operator">=</span>
</span><span class="code-line">                <span class="token keyword">new</span> <span class="token class-name">CustomRegisteredClientConverter</span><span class="token punctuation">(</span>customClientMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">CustomClientRegistrationConverter</span> clientRegistrationConverter <span class="token operator">=</span>
</span><span class="code-line">                <span class="token keyword">new</span> <span class="token class-name">CustomClientRegistrationConverter</span><span class="token punctuation">(</span>customClientMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        authenticationProviders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authenticationProvider<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>authenticationProvider <span class="token keyword">instanceof</span> <span class="token class-name">OidcClientRegistrationAuthenticationProvider</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token class-name">OidcClientRegistrationAuthenticationProvider</span> provider <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">OidcClientRegistrationAuthenticationProvider</span><span class="token punctuation">)</span> authenticationProvider<span class="token punctuation">;</span>
</span><span class="code-line">                provider<span class="token punctuation">.</span><span class="token function">setRegisteredClientConverter</span><span class="token punctuation">(</span>registeredClientConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                provider<span class="token punctuation">.</span><span class="token function">setClientRegistrationConverter</span><span class="token punctuation">(</span>clientRegistrationConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>authenticationProvider <span class="token keyword">instanceof</span> <span class="token class-name">OidcClientConfigurationAuthenticationProvider</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token class-name">OidcClientConfigurationAuthenticationProvider</span> provider <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">OidcClientConfigurationAuthenticationProvider</span><span class="token punctuation">)</span> authenticationProvider<span class="token punctuation">;</span>
</span><span class="code-line">                provider<span class="token punctuation">.</span><span class="token function">setClientRegistrationConverter</span><span class="token punctuation">(</span>clientRegistrationConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</span></code></pre></div><h2 id="使用-spring-security-oauth2-client-创建客户端服务"><a href="#使用-spring-security-oauth2-client-创建客户端服务" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用 Spring Security OAuth2 Client 创建客户端服务</h2><p>本节主要用于Spring Security OAuth2 Client 让客户端通过注册端点向授权服务器注册自身，获取<code>client_id</code>和<code>client_secret</code>等凭证。</p><p>首先参考之前文章<a target="_blank" rel="noopener noreferrer" href="https://relive27.github.io/blog/persisrence-oauth2-client">《Spring Security 持久化OAuth2客户端》</a>创建一个OAuth2客户端服务，该文章主要介绍将客户端配置持久化到数据库。</p><p>其次我们创建一个Spring 启动事件，用于在服务启动成功后执行下列步骤：</p><ul><li><p><strong>构建注册请求</strong>：客户端创建一个HTTP POST请求，包含注册所需的客户端信息，如<code>redirect_uris</code>、<code>grant_types</code>、<code>token_endpoint_auth_method</code>等。</p></li><li><p><strong>发送注册请求</strong>：使用HTTP客户端库，将请求发送到授权服务器的注册端点。</p></li><li><p><strong>解析注册响应</strong>：授权服务器成功注册后会返回包含<code>client_id</code>和<code>client_secret</code>的JSON响应。客户端解析响应并将这些凭证信息存储到数据库中，以便后续使用。</p></li></ul><h3 id="客户端注册事件"><a href="#客户端注册事件" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>客户端注册事件</h3><p>自定义OAuth2ClientRegistrationEvent实现ApplicationListener&lt;ApplicationReadyEvent&gt;监听器。<code>ApplicationReadyEvent</code>事件表明服务已准备好。</p><div class="relative"><pre><code class="language-java code-highlight"><span class="code-line"><span class="token punctuation annotation">@Component</span>
</span><span class="code-line"><span class="token punctuation annotation">@RequiredArgsConstructor</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2ClientRegistrationEvent</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApplicationReadyEvent</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">JdbcClientRegistrationRepository</span> registrationRepository<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OAuth2ClientProperties</span> properties<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token punctuation annotation">@SneakyThrows</span>
</span><span class="code-line">    <span class="token punctuation annotation">@Override</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onApplicationEvent</span><span class="token punctuation">(</span><span class="token class-name">ApplicationReadyEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token class-name">URI</span> clientsEndpoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URI</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8080/connect/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token comment">// We want to register a client for the code grant</span>
</span><span class="code-line">        <span class="token class-name">OIDCClientMetadata</span> clientMetadata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OIDCClientMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        clientMetadata<span class="token punctuation">.</span><span class="token function">setGrantTypes</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token class-name">GrantType</span><span class="token punctuation">.</span><span class="token constant">AUTHORIZATION_CODE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        clientMetadata<span class="token punctuation">.</span><span class="token function">setRedirectionURI</span><span class="token punctuation">(</span><span class="token constant">URI</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:8070/oauth2/callback/messaging-client-authorization-code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        clientMetadata<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;Test Client&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        clientMetadata<span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Scope</span><span class="token punctuation">(</span><span class="token string">&quot;message.read&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        clientMetadata<span class="token punctuation">.</span><span class="token function">setCustomField</span><span class="token punctuation">(</span><span class="token string">&quot;require-authorization-consent&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        clientMetadata<span class="token punctuation">.</span><span class="token function">setCustomField</span><span class="token punctuation">(</span><span class="token string">&quot;require-proof-key&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">OIDCClientRegistrationRequest</span> regRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OIDCClientRegistrationRequest</span><span class="token punctuation">(</span>
</span><span class="code-line">                clientsEndpoint<span class="token punctuation">,</span>
</span><span class="code-line">                clientMetadata<span class="token punctuation">,</span>
</span><span class="code-line">                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">HTTPResponse</span> httpResponse <span class="token operator">=</span> regRequest<span class="token punctuation">.</span><span class="token function">toHTTPRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">ClientRegistrationResponse</span> regResponse <span class="token operator">=</span> <span class="token class-name">OIDCClientRegistrationResponseParser</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>httpResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>regResponse<span class="token punctuation">.</span><span class="token function">indicatesSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token class-name">ClientRegistrationErrorResponse</span> errorResponse <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ClientRegistrationErrorResponse</span><span class="token punctuation">)</span> regResponse<span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>errorResponse<span class="token punctuation">.</span><span class="token function">getErrorObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">OIDCClientInformationResponse</span> successResponse <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">OIDCClientInformationResponse</span><span class="token punctuation">)</span> regResponse<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>registrationRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OAuth2ClientRegistrationMapper</span><span class="token punctuation">(</span>successResponse<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asClientRegistration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token class-name">BearerAccessToken</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">URISyntaxException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ParseException</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token class-name">AuthorizationGrant</span> clientGrant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientCredentialsGrant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">OAuth2ClientProperties<span class="token punctuation">.</span>Registration</span> registration <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getRegistration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;client-registration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">ClientID</span> clientID <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientID</span><span class="token punctuation">(</span>registration<span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">Secret</span> clientSecret <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Secret</span><span class="token punctuation">(</span>registration<span class="token punctuation">.</span><span class="token function">getClientSecret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">ClientAuthentication</span> clientAuth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientSecretBasic</span><span class="token punctuation">(</span>clientID<span class="token punctuation">,</span> clientSecret<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">Scope</span> scope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scope</span><span class="token punctuation">(</span>registration<span class="token punctuation">.</span><span class="token function">getScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">OAuth2ClientProperties<span class="token punctuation">.</span>Provider</span> provider <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;client-registartion-provider&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token class-name">URI</span> tokenEndpoint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URI</span><span class="token punctuation">(</span>provider<span class="token punctuation">.</span><span class="token function">getTokenUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">TokenRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenRequest</span><span class="token punctuation">(</span>tokenEndpoint<span class="token punctuation">,</span> clientAuth<span class="token punctuation">,</span> clientGrant<span class="token punctuation">,</span> scope<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">TokenResponse</span> response <span class="token operator">=</span> <span class="token class-name">TokenResponse</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">toHTTPRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span><span class="token function">indicatesSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token class-name">TokenErrorResponse</span> errorResponse <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">toErrorResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>errorResponse<span class="token punctuation">.</span><span class="token function">getErrorObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">AccessTokenResponse</span> successResponse <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">toSuccessResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token class-name">AccessToken</span> accessToken <span class="token operator">=</span> successResponse<span class="token punctuation">.</span><span class="token function">getTokens</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BearerAccessToken</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>最后让我们将授权服务和客户端服务都启动完成，浏览器访问<a target="_blank" rel="noopener noreferrer" href="http://127.0.0.1:8070/client/test">http://127.0.0.1:8070/client/test</a>展示效果。</p><h2 id="结论"><a href="#结论" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>结论</h2><p>OAuth 2.0 动态客户端注册流程通过API简化了客户端的注册过程，极大地提升了自动化和可扩展性。动态注册特别适合在微服务环境中使用，允许服务在创建或启动时自动注册到授权服务器。</p><p>与往常一样，本文中使用的源代码可<a target="_blank" rel="noopener noreferrer" href="https://github.com/ReLive27/spring-security-oauth2-sample/tree/main/oauth2-client-registration">在 GitHub 上</a>获得。</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=%2Fblog%2Foauth2-dynamic-client-registration">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/ReLive27/relive27.com/blob/master/data/blog/oauth2-dynamic-client-registration.mdx">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/springsecurity">SpringSecurity</a><a class="mr-3 text-sm font-medium text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/oauth2">OAuth2</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/oauth2-device-flow">OAuth2.0设备授权流程</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/oauth2-vault">如何用 Vault 保护和管理 Spring Authorization Server JWT 密钥</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:re_live27@163.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/ReLive27"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://juejin.cn/user/4051073081555869"><span class="sr-only">juejin</span><svg class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M465.189 161.792c-22.967 18.14-44.325 35.109-47.397 37.742l-5.851 4.68 10.971 8.632c5.998 4.827 11.85 9.508 13.02 10.532 1.17 1.024 17.993 14.336 37.156 29.696l34.962 27.795 5.267-3.95c2.925-2.194 23.259-18.432 45.348-35.986 21.943-17.555 41.253-32.768 42.716-33.646 1.609-1.024 2.779-2.194 2.779-2.78 0-.438-9.655-8.63-21.504-17.846-11.995-9.363-22.674-17.847-23.845-18.871-15.945-13.02-49.737-39.059-50.76-39.059-.586.147-19.896 14.922-42.862 33.061zm233.325 180.37C507.465 493.275 508.928 492.105 505.417 489.911c-3.072-1.902-11.556-8.485-64.073-50.03-9.07-7.168-18.578-14.775-21.358-16.823-2.78-2.194-8.777-6.875-13.312-10.532-4.68-3.657-10.679-8.339-13.312-10.533-13.165-10.24-71.095-56.027-102.107-80.457-5.852-4.681-11.41-8.485-12.142-8.485-.731 0-10.971 7.754-22.674 17.116-11.703 9.508-22.674 18.286-24.284 19.456-1.755 1.17-5.12 3.95-7.46 6.144-2.34 2.34-4.828 4.096-5.413 4.096-3.072 0-.731 3.072 6.437 8.777 4.096 3.218 8.777 6.875 10.094 8.046 1.316 1.024 10.24 8.045 19.748 15.506s23.26 18.286 30.428 23.99c19.31 15.215 31.89 25.308 127.853 101.084 47.836 37.742 88.796 69.779 90.844 71.095 3.657 2.487 3.95 2.487 7.46-.292a1041.42 1041.42 0 0 0 16.092-12.727c6.875-5.413 14.775-11.703 17.554-13.897 30.135-23.699 80.018-63.05 81.774-64.512 1.17-1.024 12.434-9.802 24.868-19.603s37.888-29.696 56.32-44.324c18.579-14.629 46.227-36.425 61.733-48.567 15.506-12.142 27.794-22.528 27.502-23.26-.878-1.17-57.637-47.104-59.978-48.274-.731-.439-18.578 12.727-39.497 29.257z"></path><path d="M57.93 489.326c-15.215 12.288-28.527 23.405-29.697 24.576-2.34 2.194-5.412-.44 80.018 66.852 33.207 26.185 32.622 25.747 57.637 45.495 10.386 8.192 36.279 28.672 57.783 45.495 38.18 30.135 44.91 35.401 52.663 41.545 2.048 1.756 22.967 18.14 46.372 36.572 23.26 18.432 74.167 58.514 112.933 89.088 38.912 30.573 71.095 55.734 71.826 56.027.732.293 7.46-4.389 14.921-10.386 21.797-16.97 90.259-70.949 101.523-79.872 5.705-4.535 12.873-10.24 15.945-12.58 3.072-2.488 6.436-5.12 7.314-5.852.878-.878 11.85-9.509 24.283-19.31 20.773-16.091 59.1-46.226 64.366-50.615 1.17-1.024 5.12-4.096 8.777-6.875 3.657-2.78 7.9-6.29 9.509-7.607 1.609-1.317 14.775-11.703 29.257-23.113 29.11-22.82 42.277-33.207 88.503-69.632 17.262-13.605 32.475-25.454 33.646-26.478 2.486-2.048 31.451-24.869 44.617-35.255 4.827-3.657 9.07-7.168 9.508-7.607.44-.585 5.998-4.827 12.435-9.8 6.436-4.828 13.165-10.24 15.067-11.85l3.365-2.926-9.948-7.753c-5.412-4.388-10.24-8.192-10.679-8.63-1.17-1.317-22.381-18.433-30.135-24.284-3.95-3.072-7.314-5.998-7.606-6.73-1.317-3.071-6.73.147-29.258 17.994-13.458 10.532-25.746 20.187-27.355 21.504-1.61 1.463-10.533 8.338-19.749 15.652-9.216 7.168-17.115 13.459-17.554 13.898-.439.438-6.583 5.412-13.897 10.971-7.168 5.559-15.214 11.703-17.7 13.75-4.974 4.097-5.413 4.39-20.334 16.239-5.56 4.388-11.264 8.777-12.435 9.8-1.17 1.025-20.333 16.092-42.422 33.354-22.09 17.408-41.546 32.768-43.155 34.084-1.609 1.463-14.482 11.557-28.525 22.528s-40.814 32.037-59.539 46.812c-18.578 14.775-42.276 33.353-52.516 41.399s-23.26 18.285-28.965 22.82l-10.386 8.339-4.389-3.072c-2.34-1.756-4.68-3.511-5.12-3.95-.439-.439-4.973-4.096-10.24-8.046-11.849-9.216-14.482-11.264-16.676-13.166-.878-.877-4.243-3.51-7.46-5.851-3.22-2.487-6.145-4.681-6.584-5.12-.439-.439-6.875-5.705-14.482-11.703-7.607-5.851-14.921-11.556-16.091-12.58-1.317-1.17-17.116-13.605-35.255-27.795-17.993-14.19-35.109-27.648-38.035-29.842-5.705-4.681-33.499-26.624-125.074-98.743-34.523-27.209-72.704-57.344-84.846-66.852-49.737-39.498-55.15-43.594-56.905-43.447-.877 0-14.043 10.24-29.257 22.528z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://blog.csdn.net/new_ord?spm=1000.2115.3001.5343"><span class="sr-only">csdn</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M13.36 13.974c.138.03.32.059.678.059 1.435 0 2.447-.779 2.548-1.874.148-1.583-.75-2.137-2.262-2.127-.196 0-.468 0-.612.029l-.352 3.913z" opacity="0.3"></path><path d="M6.217 13.408c.447.18 1.379.359 2.132.359.812 0 1.264-.247 1.3-.632.033-.35-.299-.398-1.216-.637-1.267-.342-2.075-.871-1.996-1.717.092-.982 1.286-1.724 3.118-1.724.893 0 1.759.069 2.208.231l-.154 1.238c-.291-.112-1.406-.266-2.16-.266-.765 0-1.16.265-1.188.555-.034.367.363.385 1.356.676 1.345.376 1.933.905 1.856 1.725-.091.964-1.165 1.784-3.31 1.784-.893 0-1.663-.179-2.087-.359l.141-1.233zM18.821 9.366c4.884-1.017 5.305.811 5.154 2.428l-.284 2.992h-1.55l.259-2.729c.056-.601.405-1.776-1.281-1.732-.584.016-.873.104-.873.104s-.051.726-.112 1.263l-.294 3.095h-1.52l.302-3.05.199-2.371zM12.653 9.224c.349-.042.884-.084 1.621-.084 1.23 0 2.225.236 2.841.734.553.464.921 1.214.819 2.302-.094 1.012-.57 1.721-1.264 2.159-.635.413-1.434.59-2.637.59-.709 0-1.385-.042-1.9-.126l.52-5.575zm1.016 4.466a2.6 2.6 0 0 0 .582.051c1.231 0 2.098-.668 2.185-1.607.127-1.358-.643-1.832-1.94-1.824-.168 0-.401 0-.525.025l-.302 3.355zM5.335 14.813c-.292.111-.896.187-1.74.187-2.427 0-3.737-1.254-3.583-2.913C.198 10.112 2.139 9 4.264 9c.823 0 1.308.073 1.762.195l-.146 1.331c-.302-.112-1.01-.215-1.583-.215-1.25 0-2.312.41-2.434 1.707-.109 1.16.637 1.714 2.044 1.714.49 0 1.212-.077 1.545-.189l-.117 1.27z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://blog.csdn.net/new_ord?spm=1000.2115.3001.5343"><span class="sr-only">jianshu</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M6 1c0 1.082-.693 3.753-4 5v2a9.54 9.54 0 0 0 2.146-.793C4.79 8.127 5 9.434 5 10h2c0-.835-.411-1.982-1-3H4.525A6.952 6.952 0 0 0 6.73 5h.476C7.67 5.732 8 6.653 8 7h2c0-.568-.2-1.282-.508-2H12V3H7.687C7.905 2.27 8 1.573 8 1H6zm10 0c0 1.082-.693 3.753-4 5v2c2.36-.572 3.831-1.725 4.729-3h.476c.465.732.795 1.653.795 2h2c0-.568-.2-1.282-.508-2H22V3h-4.313c.218-.73.313-1.427.313-2h-2zm-4 7H8v2h10v9c0 .565-.435 1-1 1h-2v2h2c1.645 0 3-1.355 3-3V8h-8zm-8 3v11h2V11H4zm4 1v8h5c1.645 0 3-1.355 3-3v-5H8zm2 2h4v1h-4v-1zm0 3h4c0 .565-.435 1-1 1h-3v-1z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>© 2024</div><div> • </div><a href="/">ReLive27</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var l=a=\u003et(a,\"__esModule\",{value:!0});var m=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{l(a);for(var c in s)t(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let e of d(s))!u.call(a,e)\u0026\u0026e!==\"default\"\u0026\u0026t(a,e,{get:()=\u003es[e],enumerable:!(c=p(s,e))||c.enumerable});return a},g=a=\u003ek(l(t(a!=null?r(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=m((w,i)=\u003e{i.exports=_jsx_runtime});var R={};N(R,{default:()=\u003eC,frontmatter:()=\u003ey});var n=g(o()),y={title:\"OAuth2.0 \\u52A8\\u6001\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\",date:\"2024-11-05 22:00:29\",tags:[\"SpringSecurity\",\"OAuth2\"],draft:!1,authors:[\"default\"]};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",ol:\"ol\",li:\"li\",strong:\"strong\",h3:\"h3\",ul:\"ul\",h4:\"h4\",pre:\"pre\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"\\u4EC0\\u4E48\\u662F-oauth-20-\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\",children:[(0,n.jsx)(e.a,{href:\"#\\u4EC0\\u4E48\\u662F-oauth-20-\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4EC0\\u4E48\\u662F OAuth 2.0 \\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\\uFF1F\"]}),(0,n.jsxs)(e.p,{children:[\"OAuth 2.0 \\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u901A\\u5E38\\u662F\\u5728\\u6388\\u6743\\u670D\\u52A1\\u5668\\u7684\\u7BA1\\u7406\\u754C\\u9762\\u6216\\u901A\\u8FC7\\u9759\\u6001\\u914D\\u7F6E\\u6587\\u4EF6\\u624B\\u52A8\\u5B8C\\u6210\\u7684\\u3002\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\\u662F\\u6307\\u5E94\\u7528\\u5728\\u542F\\u52A8\\u6216\\u8FD0\\u884C\\u8FC7\\u7A0B\\u4E2D\\u901A\\u8FC7\\u4EE3\\u7801\\u4E0E OAuth 2.0 \\u6388\\u6743\\u670D\\u52A1\\u5668\\u4EA4\\u4E92\\uFF0C\\u81EA\\u52A8\\u6CE8\\u518C\\u5E76\\u83B7\\u53D6 \",(0,n.jsx)(e.code,{children:\"client_id\"}),\" \\u548C \",(0,n.jsx)(e.code,{children:\"client_secret\"}),\" \\u7B49\\u5FC5\\u8981\\u7684\\u8BA4\\u8BC1\\u4FE1\\u606F\\u3002\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u4E0D\\u4EC5\\u7B80\\u5316\\u4E86\\u5BA2\\u6237\\u7AEF\\u7684\\u7BA1\\u7406\\uFF0C\\u8FD8\\u5141\\u8BB8\\u7CFB\\u7EDF\\u5728\\u4E0D\\u540C\\u4E0A\\u4E0B\\u6587\\u4E2D\\u52A8\\u6001\\u521B\\u5EFA\\u548C\\u914D\\u7F6E\\u5BA2\\u6237\\u7AEF\\u3002\"]}),(0,n.jsxs)(e.h2,{id:\"\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\\u7684\\u5178\\u578B\\u573A\\u666F\",children:[(0,n.jsx)(e.a,{href:\"#\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\\u7684\\u5178\\u578B\\u573A\\u666F\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\\u7684\\u5178\\u578B\\u573A\\u666F\"]}),(0,n.jsx)(e.p,{children:\"\\u5BA2\\u6237\\u7AEF\\u81EA\\u52A8\\u6CE8\\u518C\\u9002\\u7528\\u4E8E\\u4EE5\\u4E0B\\u573A\\u666F\\uFF1A\"}),(0,n.jsxs)(e.ol,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u591A\\u79DF\\u6237\\u5E94\\u7528\"}),\"\\uFF1A\\u6BCF\\u4E2A\\u79DF\\u6237\\u90FD\\u6709\\u72EC\\u7ACB\\u7684\\u5BA2\\u6237\\u7AEF\\u914D\\u7F6E\\uFF0C\\u7CFB\\u7EDF\\u9700\\u8981\\u4E3A\\u6BCF\\u4E2A\\u79DF\\u6237\\u52A8\\u6001\\u521B\\u5EFA OAuth \\u5BA2\\u6237\\u7AEF\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u5FAE\\u670D\\u52A1\\u67B6\\u6784\"}),\"\\uFF1A\\u5FAE\\u670D\\u52A1\\u53EF\\u80FD\\u5728\\u90E8\\u7F72\\u8FC7\\u7A0B\\u4E2D\\u9700\\u8981\\u6CE8\\u518C\\u81EA\\u5DF1\\u7684\\u5BA2\\u6237\\u7AEF\\uFF0C\\u4EE5\\u4FBF\\u4E0E\\u6388\\u6743\\u670D\\u52A1\\u5668\\u901A\\u4FE1\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u52A8\\u6001\\u73AF\\u5883\"}),\"\\uFF1A\\u7CFB\\u7EDF\\u9700\\u8981\\u5728\\u8FD0\\u884C\\u65F6\\u6839\\u636E\\u9700\\u6C42\\u6CE8\\u518C\\u548C\\u914D\\u7F6E\\u4E0D\\u540C\\u7684\\u5BA2\\u6237\\u7AEF\\uFF0C\\u800C\\u4E0D\\u662F\\u63D0\\u524D\\u786C\\u7F16\\u7801\\u914D\\u7F6E\\u3002\"]})]}),(0,n.jsxs)(e.h2,{id:\"\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u7684\\u6D41\\u7A0B\",children:[(0,n.jsx)(e.a,{href:\"#\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u7684\\u6D41\\u7A0B\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u7684\\u6D41\\u7A0B\"]}),(0,n.jsx)(e.p,{children:\"OAuth 2.0 \\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u6D41\\u7A0B\\u4F7F\\u5F97\\u5BA2\\u6237\\u7AEF\\u80FD\\u591F\\u901A\\u8FC7API\\u52A8\\u6001\\u6CE8\\u518C\\u81EA\\u8EAB\\uFF0C\\u800C\\u65E0\\u9700\\u624B\\u52A8\\u64CD\\u4F5C\\u3002\\u8FD9\\u4E00\\u8FC7\\u7A0B\\u6D89\\u53CA\\u591A\\u4E2A\\u6B65\\u9AA4\\uFF0C\\u786E\\u4FDD\\u5BA2\\u6237\\u7AEF\\u80FD\\u591F\\u4E0E\\u6388\\u6743\\u670D\\u52A1\\u5668\\u6709\\u6548\\u901A\\u4FE1\\u5E76\\u83B7\\u5F97\\u5FC5\\u8981\\u7684\\u51ED\\u8BC1\\u4FE1\\u606F\\u3002\\u4EE5\\u4E0B\\u662F\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u7684\\u8BE6\\u7EC6\\u6D41\\u7A0B\\u8BF4\\u660E\\uFF1A\"}),(0,n.jsxs)(e.h3,{id:\"1-\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u6CE8\\u518C\\u8BF7\\u6C42\",children:[(0,n.jsx)(e.a,{href:\"#1-\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u6CE8\\u518C\\u8BF7\\u6C42\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"1. \",(0,n.jsx)(e.strong,{children:\"\\u5BA2\\u6237\\u7AEF\\u53D1\\u9001\\u6CE8\\u518C\\u8BF7\\u6C42\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u5BA2\\u6237\\u7AEF\\u60F3\\u8981\\u52A8\\u6001\\u6CE8\\u518C\\u65F6\\uFF0C\\u4F1A\\u5411\\u6388\\u6743\\u670D\\u52A1\\u5668\\u53D1\\u9001\\u4E00\\u4E2AHTTP \",(0,n.jsx)(e.code,{children:\"POST\"}),\"\\u8BF7\\u6C42\\u3002\\u8BE5\\u8BF7\\u6C42\\u5305\\u542B\\u5173\\u4E8E\\u5BA2\\u6237\\u7AEF\\u7684\\u57FA\\u672C\\u4FE1\\u606F\\uFF0C\\u901A\\u5E38\\u4E3AJSON\\u683C\\u5F0F\\u3002\\u8BF7\\u6C42\\u7684\\u5185\\u5BB9\\u6839\\u636E\\u5177\\u4F53\\u5E94\\u7528\\u7684\\u9700\\u6C42\\u53EF\\u80FD\\u6709\\u6240\\u4E0D\\u540C\\uFF0C\\u4F46\\u4E3B\\u8981\\u5305\\u62EC\\u4EE5\\u4E0B\\u4FE1\\u606F\\uFF1A\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_name\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u7684\\u540D\\u79F0\\uFF0C\\u901A\\u5E38\\u662F\\u6613\\u4E8E\\u8BC6\\u522B\\u7684\\u5E94\\u7528\\u540D\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"redirect_uris\"}),\"\\uFF1A\\u56DE\\u8C03URL\\u5217\\u8868\\uFF0C\\u6388\\u6743\\u670D\\u52A1\\u5668\\u5728\\u6388\\u6743\\u7801\\u6388\\u6743\\u6D41\\u7A0B\\u4E2D\\u4F1A\\u4F7F\\u7528\\u8BE5URL\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"grant_types\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u652F\\u6301\\u7684\\u6388\\u6743\\u7C7B\\u578B\\uFF0C\\u4F8B\\u5982\",(0,n.jsx)(e.code,{children:\"authorization_code\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"client_credentials\"}),\"\\u7B49\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"response_types\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u671F\\u671B\\u7684\\u54CD\\u5E94\\u7C7B\\u578B\\uFF0C\\u5982\",(0,n.jsx)(e.code,{children:\"code\"}),\"\\uFF08\\u6388\\u6743\\u7801\\uFF09\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"scope\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u8BF7\\u6C42\\u7684\\u6743\\u9650\\u8303\\u56F4\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"token_endpoint_auth_method\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5C06\\u5982\\u4F55\\u5728\\u4EE4\\u724C\\u7AEF\\u70B9\\u8FDB\\u884C\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\uFF0C\\u5E38\\u89C1\\u7684\\u65B9\\u5F0F\\u6709\",(0,n.jsx)(e.code,{children:\"client_secret_basic\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"client_secret_post\"}),\"\\u7B49\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"token_endpoint_auth_signing_alg\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5728\",(0,n.jsx)(e.strong,{children:\"\\u4EE4\\u724C\\u7AEF\\u70B9\"}),\"\\u8FDB\\u884C\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\u65F6\\u4F7F\\u7528\\u7684\\u7B7E\\u540D\\u7B97\\u6CD5\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"jwks_uri\"}),\"\\uFF1A\\u516C\\u94A5\\u4FE1\\u606FURL\\uFF0C\\u5F53\\u5BA2\\u6237\\u7AEF\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\u65B9\\u5F0F\\u4E3A\",(0,n.jsx)(e.code,{children:\"private_key_jwt\"}),\"\\uFF0C\\u5BA2\\u6237\\u7AEF\\u9700\\u8981\\u63D0\\u4F9B\\u516C\\u94A5\\u4FE1\\u606FURL\\u3002\"]})]}),(0,n.jsxs)(e.h4,{id:\"\\u793A\\u4F8B\\u8BF7\\u6C42\",children:[(0,n.jsx)(e.a,{href:\"#\\u793A\\u4F8B\\u8BF7\\u6C42\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u793A\\u4F8B\\u8BF7\\u6C42\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-json\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"client_name\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"SampleApp\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"redirect_uris\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"https://client.example.com/callback\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"grant_types\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"authorization_code\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"response_types\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"code\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"scope\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"openid profile email\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"token_endpoint_auth_method\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"client_secret_basic\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"token_endpoint_auth_signing_alg\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"RS256\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"2-\\u6388\\u6743\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u8BF7\\u6C42\",children:[(0,n.jsx)(e.a,{href:\"#2-\\u6388\\u6743\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u8BF7\\u6C42\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"2. \",(0,n.jsx)(e.strong,{children:\"\\u6388\\u6743\\u670D\\u52A1\\u5668\\u9A8C\\u8BC1\\u8BF7\\u6C42\"})]}),(0,n.jsx)(e.p,{children:\"\\u6388\\u6743\\u670D\\u52A1\\u5668\\u5728\\u63A5\\u6536\\u5230\\u5BA2\\u6237\\u7AEF\\u7684\\u6CE8\\u518C\\u8BF7\\u6C42\\u540E\\uFF0C\\u4F1A\\u5BF9\\u8BF7\\u6C42\\u5185\\u5BB9\\u8FDB\\u884C\\u9A8C\\u8BC1\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u6821\\u9A8C\\u5B57\\u6BB5\\u683C\\u5F0F\"}),\"\\uFF1A\\u68C0\\u67E5\\u63D0\\u4EA4\\u7684\\u6570\\u636E\\u662F\\u5426\\u7B26\\u5408\\u9884\\u671F\\u7684\\u683C\\u5F0F\\u548C\\u6807\\u51C6\\u3002\\u6BD4\\u5982\\uFF0C\\u56DE\\u8C03URL\\u662F\\u5426\\u662F\\u6709\\u6548\\u7684URL\\u683C\\u5F0F\\uFF0C\\u6388\\u6743\\u7C7B\\u578B\\u662F\\u5426\\u5728\\u652F\\u6301\\u7684\\u8303\\u56F4\\u5185\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"\\u7B56\\u7565\\u9A8C\\u8BC1\"}),\"\\uFF1A\\u6388\\u6743\\u670D\\u52A1\\u5668\\u53EF\\u4EE5\\u6839\\u636E\\u5176\\u5185\\u90E8\\u7B56\\u7565\\u51B3\\u5B9A\\u662F\\u5426\\u5141\\u8BB8\\u6CE8\\u518C\\u7279\\u5B9A\\u7C7B\\u578B\\u7684\\u5BA2\\u6237\\u7AEF\\u3002\\u4F8B\\u5982\\uFF0C\\u67D0\\u4E9B\\u670D\\u52A1\\u5668\\u53EF\\u80FD\\u53EA\\u5141\\u8BB8\\u9884\\u5148\\u6279\\u51C6\\u7684\\u5BA2\\u6237\\u7AEF\\u8FDB\\u884C\\u6CE8\\u518C\\u3002\"]})]}),(0,n.jsxs)(e.h3,{id:\"3-\\u6388\\u6743\\u670D\\u52A1\\u5668\\u751F\\u6210\\u5BA2\\u6237\\u7AEF\\u51ED\\u8BC1\",children:[(0,n.jsx)(e.a,{href:\"#3-\\u6388\\u6743\\u670D\\u52A1\\u5668\\u751F\\u6210\\u5BA2\\u6237\\u7AEF\\u51ED\\u8BC1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"3. \",(0,n.jsx)(e.strong,{children:\"\\u6388\\u6743\\u670D\\u52A1\\u5668\\u751F\\u6210\\u5BA2\\u6237\\u7AEF\\u51ED\\u8BC1\"})]}),(0,n.jsx)(e.p,{children:\"\\u5982\\u679C\\u6CE8\\u518C\\u8BF7\\u6C42\\u901A\\u8FC7\\u9A8C\\u8BC1\\uFF0C\\u6388\\u6743\\u670D\\u52A1\\u5668\\u4F1A\\u4E3A\\u5BA2\\u6237\\u7AEF\\u751F\\u6210\\u5FC5\\u8981\\u7684\\u51ED\\u8BC1\\u4FE1\\u606F\\uFF0C\\u5305\\u62EC\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_id\"}),\"\\uFF1A\\u552F\\u4E00\\u6807\\u8BC6\\u5BA2\\u6237\\u7AEF\\u7684ID\\uFF0C\\u901A\\u5E38\\u662F\\u7531\\u6388\\u6743\\u670D\\u52A1\\u5668\\u968F\\u673A\\u751F\\u6210\\u7684\\u5B57\\u7B26\\u4E32\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_secret\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5BC6\\u94A5\\uFF0C\\u5728\\u9700\\u8981\\u8BA4\\u8BC1\\u7684\\u6388\\u6743\\u7C7B\\u578B\\u4E2D\\u4F7F\\u7528\\uFF08\\u4F8B\\u5982\\u5BA2\\u6237\\u7AEF\\u51ED\\u8BC1\\u6388\\u6743\\u7C7B\\u578B\\uFF09\\u3002\\u540C\\u6837\\u662F\\u968F\\u673A\\u751F\\u6210\\u5E76\\u5B89\\u5168\\u5B58\\u50A8\\u3002\"]}),(0,n.jsxs)(e.li,{children:[\"\\u5176\\u4ED6\\u5C5E\\u6027\\u5982\",(0,n.jsx)(e.code,{children:\"client_id_issued_at\"}),\"\\uFF08\\u5BA2\\u6237\\u7AEFID\\u751F\\u6210\\u65F6\\u95F4\\uFF09\\u3001\",(0,n.jsx)(e.code,{children:\"client_secret_expires_at\"}),\"\\uFF08\\u5BA2\\u6237\\u7AEF\\u5BC6\\u94A5\\u7684\\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u5982\\u679C\\u6709\\uFF09\\u7B49\\u3002\"]})]}),(0,n.jsx)(e.p,{children:\"\\u751F\\u6210\\u8FD9\\u4E9B\\u4FE1\\u606F\\u540E\\uFF0C\\u6388\\u6743\\u670D\\u52A1\\u5668\\u4F1A\\u5C06\\u5BA2\\u6237\\u7AEF\\u7684\\u6CE8\\u518C\\u4FE1\\u606F\\u5B58\\u50A8\\u5728\\u5176\\u5185\\u90E8\\u6570\\u636E\\u5E93\\u4E2D\\u3002\"}),(0,n.jsxs)(e.h3,{id:\"4-\\u6388\\u6743\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u6CE8\\u518C\\u54CD\\u5E94\",children:[(0,n.jsx)(e.a,{href:\"#4-\\u6388\\u6743\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u6CE8\\u518C\\u54CD\\u5E94\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"4. \",(0,n.jsx)(e.strong,{children:\"\\u6388\\u6743\\u670D\\u52A1\\u5668\\u8FD4\\u56DE\\u6CE8\\u518C\\u54CD\\u5E94\"})]}),(0,n.jsx)(e.p,{children:\"\\u5728\\u751F\\u6210\\u5BA2\\u6237\\u7AEF\\u51ED\\u8BC1\\u540E\\uFF0C\\u6388\\u6743\\u670D\\u52A1\\u5668\\u4F1A\\u5C06\\u5BA2\\u6237\\u7AEF\\u4FE1\\u606F\\u4F5C\\u4E3AHTTP\\u54CD\\u5E94\\u8FD4\\u56DE\\u7ED9\\u5BA2\\u6237\\u7AEF\\uFF0C\\u901A\\u5E38\\u4E5F\\u662F\\u4EE5JSON\\u683C\\u5F0F\\u63D0\\u4F9B\\u3002\\u8FD4\\u56DE\\u7684\\u54CD\\u5E94\\u5C06\\u5305\\u542B\\u4EE5\\u4E0B\\u4FE1\\u606F\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_id\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u7684\\u552F\\u4E00ID\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_secret\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5BC6\\u94A5\\uFF08\\u5982\\u679C\\u5B58\\u5728\\uFF09\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_secret_expires_at\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u5BC6\\u94A5\\u7684\\u8FC7\\u671F\\u65F6\\u95F4\\uFF08\\u5982\\u679C\\u9002\\u7528\\uFF09\\u3002\"]}),(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"client_id_issued_at\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEFID\\u7684\\u751F\\u6210\\u65F6\\u95F4\\u3002\"]}),(0,n.jsx)(e.li,{children:\"\\u5176\\u4ED6\\u53EF\\u9009\\u7684\\u6CE8\\u518C\\u4FE1\\u606F\\uFF08\\u5982Logo URI\\u3001\\u653F\\u7B56URL\\u7B49\\uFF09\\u3002\"})]}),(0,n.jsxs)(e.h4,{id:\"\\u793A\\u4F8B\\u54CD\\u5E94\",children:[(0,n.jsx)(e.a,{href:\"#\\u793A\\u4F8B\\u54CD\\u5E94\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u793A\\u4F8B\\u54CD\\u5E94\\uFF1A\"]}),(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-json\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"settings.client.require-authorization-consent\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"grant_types\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"authorization_code\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"registration_client_uri\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://127.0.0.1:8080/connect/register?client_id=ECnm9EdfP44eGV2KmF2J_C5ERw_5rY4_LR-vSKZDJuM\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"redirect_uris\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://120.0.0.1:8070/callback\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"client_id\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"ECnm9EdfP44eGV2KmF2J_C5ERw_5rY4_LR-vSKZDJuM\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"token_endpoint_auth_method\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"client_secret_basic\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"scope\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"LOGIN\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"client_id_issued_at\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1729435078\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"client_secret\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"sc6FzJ-azjcZ_W6cKMS_jb1tAEiZpVD__y9tQhgj6Zq8wySXM6GWX7QG-H8w0YZX\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"client_name\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"client_1\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"settings.client.require-proof-key\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"response_types\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"code\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"id_token_signed_response_alg\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"RS256\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"registration_access_token\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"eyJraWQiOiI2ODBmNTVlOC1lMmZhLTQ0Y2UtYTZlYi1mMGNmNGZjYmNiOTAiLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJFQ25tOUVkZlA0NGVHVjJLbUYySl9DNUVSd181clk0X0xSLXZTS1pESnVNIiwiYXVkIjoiRUNubTlFZGZQNDRlR1YyS21GMkpfQzVFUndfNXJZNF9MUi12U0taREp1TSIsIm5iZiI6MTcyOTQzNTA3OCwic2NvcGUiOlsiY2xpZW50LnJlYWQiXSwiaXNzIjoiaHR0cDovLzEyNy4wLjAuMTo4MDgwIiwiZXhwIjoxNzI5NDM1Mzc4LCJpYXQiOjE3Mjk0MzUwNzgsImp0aSI6ImYxNGE4NTY2LTgxM2UtNGFiZS04Njc3LTc0ZDE2ZjBjMmI1YSJ9.R92KEFzL9is7-wuBTXygT-7l6DEmtv6VArKv1jpmpLQwU4nULB878FqecMti_dEeUVTQ5GXvtBey49Fcld8vaqAjLPTkXp7M7J0UQ6auWSrjoDXlfyHVf5KODExiKmbcxqnrLCphCw2TBok848gcbpJIhTRJknsc6SqU7rbzp68_WY2y3L7PujPjq8B9kD2L9rvlHFw3qCi1Pd2eQ7GlL3e_dCDD7CEBXKSeMhOfv_BGrGTG_Iikd_8vDty6nGxGCyTP1e0JRdzwdIj8JmvK1HgIV0w4zq6bU3ipSmM3UJk2qUqcfH_z9KZ5yj9kIFpKjZNMgT_MxllKzlvJ-vnxtw\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"client_secret_expires_at\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"5-\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\\u6CE8\\u518C\\u4FE1\\u606F\",children:[(0,n.jsx)(e.a,{href:\"#5-\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\\u6CE8\\u518C\\u4FE1\\u606F\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"5. \",(0,n.jsx)(e.strong,{children:\"\\u5BA2\\u6237\\u7AEF\\u4F7F\\u7528\\u6CE8\\u518C\\u4FE1\\u606F\"})]}),(0,n.jsxs)(e.p,{children:[\"\\u5BA2\\u6237\\u7AEF\\u5728\\u83B7\\u5F97\",(0,n.jsx)(e.code,{children:\"client_id\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"client_secret\"}),\"\\u540E\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528\\u8FD9\\u4E9B\\u4FE1\\u606F\\u5411\\u6388\\u6743\\u670D\\u52A1\\u5668\\u53D1\\u8D77OAuth 2.0\\u76F8\\u5173\\u8BF7\\u6C42\\uFF08\\u4F8B\\u5982\\u83B7\\u53D6\\u8BBF\\u95EE\\u4EE4\\u724C\\uFF09\\u3002\\u6BCF\\u4E2A\\u540E\\u7EED\\u8BF7\\u6C42\\u90FD\\u4F1A\\u643A\\u5E26\\u8FD9\\u4E9B\\u51ED\\u8BC1\\u4FE1\\u606F\\uFF0C\\u6388\\u6743\\u670D\\u52A1\\u5668\\u4F1A\\u6839\\u636E\\u5BA2\\u6237\\u7AEF\\u7684\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\u65B9\\u5F0F\\u9A8C\\u8BC1\\u8BF7\\u6C42\\u3002\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"\\u5728\\u6388\\u6743\\u7801\\u6D41\\u7A0B\\u4E2D\\uFF0C\\u5BA2\\u6237\\u7AEF\\u4F1A\\u4F7F\\u7528\",(0,n.jsx)(e.code,{children:\"client_id\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"client_secret\"}),\"\\u6765\\u6362\\u53D6\\u8BBF\\u95EE\\u4EE4\\u724C\\u3002\"]}),(0,n.jsx)(e.li,{children:\"\\u5728\\u5BA2\\u6237\\u7AEF\\u51ED\\u8BC1\\u6D41\\u7A0B\\u4E2D\\uFF0C\\u5BA2\\u6237\\u7AEF\\u76F4\\u63A5\\u7528\\u8FD9\\u4E9B\\u4FE1\\u606F\\u4E0E\\u6388\\u6743\\u670D\\u52A1\\u5668\\u4EA4\\u6362\\u8BBF\\u95EE\\u4EE4\\u724C\\u3002\"})]}),(0,n.jsxs)(e.h2,{id:\"\\u4F7F\\u7528-spring-authorization-server-\\u5B9E\\u73B0\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\",children:[(0,n.jsx)(e.a,{href:\"#\\u4F7F\\u7528-spring-authorization-server-\\u5B9E\\u73B0\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528 Spring Authorization Server \\u5B9E\\u73B0\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\"]}),(0,n.jsx)(e.p,{children:\"\\u4E3A\\u4E86\\u5728\\u9879\\u76EE\\u4E2D\\u5B9E\\u73B0\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u529F\\u80FD\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528Spring Authorization Server\\u5B9E\\u73B0\\u6388\\u6743\\u670D\\u52A1\\u6765\\u652F\\u6301OAuth 2.0\\u7684\\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u3002\"}),(0,n.jsxs)(e.h3,{id:\"\\u9879\\u76EE\\u4F9D\\u8D56\",children:[(0,n.jsx)(e.a,{href:\"#\\u9879\\u76EE\\u4F9D\\u8D56\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u9879\\u76EE\\u4F9D\\u8D56\"]}),(0,n.jsx)(e.pre,{className:\"language-xml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-xml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"org.springframework.boot\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"spring-boot-starter-security\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"3.1.5\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"org.springframework.security\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"spring-security-oauth2-authorization-server\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"1.2.1\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"org.springframework.boot\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"spring-boot-starter-oauth2-resource-server\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"3.1.5\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"org.springframework.boot\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"groupId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"spring-boot-starter-web\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"artifactId\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\"3.1.5\",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"version\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),\"dependency\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"\\u914D\\u7F6E\\u6388\\u6743\\u670D\\u52A1\\u5668\",children:[(0,n.jsx)(e.a,{href:\"#\\u914D\\u7F6E\\u6388\\u6743\\u670D\\u52A1\\u5668\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6E\\u6388\\u6743\\u670D\\u52A1\\u5668\"]}),(0,n.jsx)(e.p,{children:\"\\u914D\\u7F6ESpring Authorization Server \\u6388\\u6743\\u670D\\u52A1\\u5668\\uFF0C\\u5F00\\u542F\\u5BA2\\u6237\\u7AEF\\u52A8\\u6001\\u6CE8\\u518C\\u3002\"}),(0,n.jsx)(e.pre,{className:\"language-java\",children:(0,n.jsxs)(e.code,{className:\"language-java code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation annotation\",children:\"@Bean\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"public\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"SecurityFilterChain\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"authorizationServerSecurityFilterChain\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"HttpSecurity\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"throws\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Exception\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OAuth2AuthorizationServerConfiguration\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"applyDefaultSecurity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u5F00\\u542F\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u7AEF\\u70B9\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getConfigurer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OAuth2AuthorizationServerConfigurer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"oidc\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"oidc \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\u003e\"}),\" oidc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"clientRegistrationEndpoint\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"clientRegistrationEndpoint \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`                clientRegistrationEndpoint\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"authenticationProviders\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"configureCustomClientMetadataConverters\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u8D44\\u6E90\\u670D\\u52A1\\u914D\\u7F6E\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"oauth2ResourceServer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"oauth2ResourceServer \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            oauth2ResourceServer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"jwt\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Customizer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"withDefaults\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// \\u8BA4\\u8BC1\\u5931\\u8D25\\u8DF3\\u8F6C\\u5230\\u767B\\u5F55\\u9875\\u9762\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" http\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"exceptionHandling\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"exceptions \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\u003e\"}),\" exceptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token function\",children:\"authenticationEntryPoint\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginUrlAuthenticationEntryPoint\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"/login\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"build\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"\\u914D\\u7F6E\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\",children:[(0,n.jsx)(e.a,{href:\"#\\u914D\\u7F6E\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u914D\\u7F6E\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\"]}),(0,n.jsxs)(e.p,{children:[\"\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\\u7528\\u4E8E\\u5411\\u6388\\u6743\\u670D\\u52A1\\u5668\\u6CE8\\u518C\\u65B0\\u5BA2\\u6237\\u7AEF\\u3002\\u5BA2\\u6237\\u7AEF\\u5FC5\\u987B\\u914D\\u7F6E\\u8303\\u56F4\",(0,n.jsx)(e.code,{children:\"client.create\"}),\"\\uFF0C\\u5E76\\u53EF\\u9009\\u5730\",(0,n.jsx)(e.code,{children:\"client.read\"}),\"\\u5206\\u522B\\u7528\\u4E8E\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\\u548C\\u68C0\\u7D22\\u5BA2\\u6237\\u7AEF\\u3002\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\\u7528\\u4E8E\\u5728\\u52A8\\u6001\\u6CE8\\u518C\\u8FC7\\u7A0B\\u4E2D\\u83B7\\u53D6\\u521D\\u59CB\\u8BBF\\u95EE\\u4EE4\\u724C\"]}),(0,n.jsx)(e.pre,{className:\"language-java\",children:(0,n.jsxs)(e.code,{className:\"language-java code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation annotation\",children:\"@Bean\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"public\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"RegisteredClientRepository\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"registeredClientRepository\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"JdbcTemplate\"}),\" jdbcTemplate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"RegisteredClient\"}),\" registrarClient \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"RegisteredClient\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"withId\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"1\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"clientId\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"registrar-client\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"clientSecret\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"{noop}relive27-client\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"clientAuthenticationMethod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientAuthenticationMethod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"CLIENT_SECRET_BASIC\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"authorizationGrantType\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"AuthorizationGrantType\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"CLIENT_CREDENTIALS\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"scope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"client.create\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"scope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"client.read\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"build\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"JdbcRegisteredClientRepository\"}),\" jdbcRegisteredClientRepository \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"JdbcRegisteredClientRepository\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"jdbcTemplate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    jdbcRegisteredClientRepository\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"save\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"registrarClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" jdbcRegisteredClientRepository\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"\\u81EA\\u5B9A\\u4E49\\u5BA2\\u6237\\u7AEF\\u5143\\u6570\\u636E\",children:[(0,n.jsx)(e.a,{href:\"#\\u81EA\\u5B9A\\u4E49\\u5BA2\\u6237\\u7AEF\\u5143\\u6570\\u636E\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u81EA\\u5B9A\\u4E49\\u5BA2\\u6237\\u7AEF\\u5143\\u6570\\u636E\"]}),(0,n.jsxs)(e.p,{children:[\"\\u4E3A\\u4E86\\u652F\\u6301\\u5728\\u6CE8\\u518C\\u5BA2\\u6237\\u7AEF\\u65F6\\u53EF\\u4EE5\\u589E\\u52A0\\u4E00\\u4E9B\\u53C2\\u6570\\uFF0C\\u4FBF\\u4E8E\\u6211\\u4EEC\\u505A\\u4E00\\u4E9B\\u989D\\u5916\\u7684\\u4E1A\\u52A1\\u64CD\\u4F5C\\uFF0C\\u53EF\\u4EE5\\u81EA\\u5B9A\\u4E49\\u9ED8\\u8BA4\\u503C\",(0,n.jsx)(e.code,{children:\"AuthenticationProvider\"}),\"\\u4EE5\\u652F\\u6301\\u81EA\\u5B9A\\u4E49\\u5BA2\\u6237\\u7AEF\\u5143\\u6570\\u636E\\u53C2\\u6570\\u3002\\u4EE5\\u4E0B\\u793A\\u4F8B\\u663E\\u793A\\u4E86\\u652F\\u6301\\u81EA\\u5B9A\\u4E49\\u5BA2\\u6237\\u7AEF\\u5143\\u6570\\u636E\\u53C2\\u6570\",(0,n.jsx)(e.code,{children:\"require-authorization-consent\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"require-proof-key\"}),\"\\u7684\\u5B9E\\u73B0\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-java\",children:(0,n.jsxs)(e.code,{className:\"language-java code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"public\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Consumer\"}),(0,n.jsxs)(e.span,{className:\"token generics\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"List\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"AuthenticationProvider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"configureCustomClientMetadataConverters\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"List\"}),(0,n.jsxs)(e.span,{className:\"token generics\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"String\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\" customClientMetadata \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Arrays\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"asList\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"require-authorization-consent\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"require-proof-key\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"authenticationProviders\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"CustomRegisteredClientConverter\"}),\" registeredClientConverter \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"CustomRegisteredClientConverter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"customClientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"CustomClientRegistrationConverter\"}),\" clientRegistrationConverter \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"CustomClientRegistrationConverter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"customClientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        authenticationProviders\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"forEach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"authenticationProvider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"authenticationProvider \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"instanceof\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OidcClientRegistrationAuthenticationProvider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OidcClientRegistrationAuthenticationProvider\"}),\" provider \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OidcClientRegistrationAuthenticationProvider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" authenticationProvider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                provider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setRegisteredClientConverter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"registeredClientConverter\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                provider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setClientRegistrationConverter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"clientRegistrationConverter\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"authenticationProvider \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"instanceof\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OidcClientConfigurationAuthenticationProvider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OidcClientConfigurationAuthenticationProvider\"}),\" provider \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OidcClientConfigurationAuthenticationProvider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" authenticationProvider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                provider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setClientRegistrationConverter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"clientRegistrationConverter\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"\\u4F7F\\u7528-spring-security-oauth2-client-\\u521B\\u5EFA\\u5BA2\\u6237\\u7AEF\\u670D\\u52A1\",children:[(0,n.jsx)(e.a,{href:\"#\\u4F7F\\u7528-spring-security-oauth2-client-\\u521B\\u5EFA\\u5BA2\\u6237\\u7AEF\\u670D\\u52A1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u4F7F\\u7528 Spring Security OAuth2 Client \\u521B\\u5EFA\\u5BA2\\u6237\\u7AEF\\u670D\\u52A1\"]}),(0,n.jsxs)(e.p,{children:[\"\\u672C\\u8282\\u4E3B\\u8981\\u7528\\u4E8ESpring Security OAuth2 Client \\u8BA9\\u5BA2\\u6237\\u7AEF\\u901A\\u8FC7\\u6CE8\\u518C\\u7AEF\\u70B9\\u5411\\u6388\\u6743\\u670D\\u52A1\\u5668\\u6CE8\\u518C\\u81EA\\u8EAB\\uFF0C\\u83B7\\u53D6\",(0,n.jsx)(e.code,{children:\"client_id\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"client_secret\"}),\"\\u7B49\\u51ED\\u8BC1\\u3002\"]}),(0,n.jsxs)(e.p,{children:[\"\\u9996\\u5148\\u53C2\\u8003\\u4E4B\\u524D\\u6587\\u7AE0\",(0,n.jsx)(e.a,{href:\"https://relive27.github.io/blog/persisrence-oauth2-client\",children:\"\\u300ASpring Security \\u6301\\u4E45\\u5316OAuth2\\u5BA2\\u6237\\u7AEF\\u300B\"}),\"\\u521B\\u5EFA\\u4E00\\u4E2AOAuth2\\u5BA2\\u6237\\u7AEF\\u670D\\u52A1\\uFF0C\\u8BE5\\u6587\\u7AE0\\u4E3B\\u8981\\u4ECB\\u7ECD\\u5C06\\u5BA2\\u6237\\u7AEF\\u914D\\u7F6E\\u6301\\u4E45\\u5316\\u5230\\u6570\\u636E\\u5E93\\u3002\"]}),(0,n.jsx)(e.p,{children:\"\\u5176\\u6B21\\u6211\\u4EEC\\u521B\\u5EFA\\u4E00\\u4E2ASpring \\u542F\\u52A8\\u4E8B\\u4EF6\\uFF0C\\u7528\\u4E8E\\u5728\\u670D\\u52A1\\u542F\\u52A8\\u6210\\u529F\\u540E\\u6267\\u884C\\u4E0B\\u5217\\u6B65\\u9AA4\\uFF1A\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u6784\\u5EFA\\u6CE8\\u518C\\u8BF7\\u6C42\"}),\"\\uFF1A\\u5BA2\\u6237\\u7AEF\\u521B\\u5EFA\\u4E00\\u4E2AHTTP POST\\u8BF7\\u6C42\\uFF0C\\u5305\\u542B\\u6CE8\\u518C\\u6240\\u9700\\u7684\\u5BA2\\u6237\\u7AEF\\u4FE1\\u606F\\uFF0C\\u5982\",(0,n.jsx)(e.code,{children:\"redirect_uris\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"grant_types\"}),\"\\u3001\",(0,n.jsx)(e.code,{children:\"token_endpoint_auth_method\"}),\"\\u7B49\\u3002\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u53D1\\u9001\\u6CE8\\u518C\\u8BF7\\u6C42\"}),\"\\uFF1A\\u4F7F\\u7528HTTP\\u5BA2\\u6237\\u7AEF\\u5E93\\uFF0C\\u5C06\\u8BF7\\u6C42\\u53D1\\u9001\\u5230\\u6388\\u6743\\u670D\\u52A1\\u5668\\u7684\\u6CE8\\u518C\\u7AEF\\u70B9\\u3002\"]})}),(0,n.jsx)(e.li,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"\\u89E3\\u6790\\u6CE8\\u518C\\u54CD\\u5E94\"}),\"\\uFF1A\\u6388\\u6743\\u670D\\u52A1\\u5668\\u6210\\u529F\\u6CE8\\u518C\\u540E\\u4F1A\\u8FD4\\u56DE\\u5305\\u542B\",(0,n.jsx)(e.code,{children:\"client_id\"}),\"\\u548C\",(0,n.jsx)(e.code,{children:\"client_secret\"}),\"\\u7684JSON\\u54CD\\u5E94\\u3002\\u5BA2\\u6237\\u7AEF\\u89E3\\u6790\\u54CD\\u5E94\\u5E76\\u5C06\\u8FD9\\u4E9B\\u51ED\\u8BC1\\u4FE1\\u606F\\u5B58\\u50A8\\u5230\\u6570\\u636E\\u5E93\\u4E2D\\uFF0C\\u4EE5\\u4FBF\\u540E\\u7EED\\u4F7F\\u7528\\u3002\"]})})]}),(0,n.jsxs)(e.h3,{id:\"\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u4E8B\\u4EF6\",children:[(0,n.jsx)(e.a,{href:\"#\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u4E8B\\u4EF6\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u4E8B\\u4EF6\"]}),(0,n.jsxs)(e.p,{children:[\"\\u81EA\\u5B9A\\u4E49OAuth2ClientRegistrationEvent\\u5B9E\\u73B0ApplicationListener\u003cApplicationReadyEvent\u003e\\u76D1\\u542C\\u5668\\u3002\",(0,n.jsx)(e.code,{children:\"ApplicationReadyEvent\"}),\"\\u4E8B\\u4EF6\\u8868\\u660E\\u670D\\u52A1\\u5DF2\\u51C6\\u5907\\u597D\\u3002\"]}),(0,n.jsx)(e.pre,{className:\"language-java\",children:(0,n.jsxs)(e.code,{className:\"language-java code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation annotation\",children:\"@Component\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation annotation\",children:\"@RequiredArgsConstructor\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"public\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OAuth2ClientRegistrationEvent\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"implements\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ApplicationListener\"}),(0,n.jsxs)(e.span,{className:\"token generics\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ApplicationReadyEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"final\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"JdbcClientRegistrationRepository\"}),\" registrationRepository\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"final\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OAuth2ClientProperties\"}),\" properties\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation annotation\",children:\"@SneakyThrows\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation annotation\",children:\"@Override\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"public\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"void\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"onApplicationEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ApplicationReadyEvent\"}),\" event\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"URI\"}),\" clientsEndpoint \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"URI\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://localhost:8080/connect/register\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// We want to register a client for the code grant\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientMetadata\"}),\" clientMetadata \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientMetadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setGrantTypes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Collections\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"singleton\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"GrantType\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"AUTHORIZATION_CODE\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setRedirectionURI\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token constant\",children:\"URI\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"create\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"http://127.0.0.1:8070/oauth2/callback/messaging-client-authorization-code\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Test Client\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setScope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Scope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"message.read\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setCustomField\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"require-authorization-consent\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"setCustomField\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"require-proof-key\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientRegistrationRequest\"}),\" regRequest \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientRegistrationRequest\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                clientsEndpoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                clientMetadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getToken\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"HTTPResponse\"}),\" httpResponse \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" regRequest\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toHTTPRequest\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"send\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientRegistrationResponse\"}),\" regResponse \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientRegistrationResponseParser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"httpResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"regResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"indicatesSuccess\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientRegistrationErrorResponse\"}),\" errorResponse \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientRegistrationErrorResponse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" regResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"throw\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IllegalStateException\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"errorResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getErrorObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientInformationResponse\"}),\" successResponse \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OIDCClientInformationResponse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" regResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"registrationRepository\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"save\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"OAuth2ClientRegistrationMapper\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"successResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"asClientRegistration\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"BearerAccessToken\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getToken\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"throws\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"URISyntaxException\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IOException\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ParseException\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"AuthorizationGrant\"}),\" clientGrant \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientCredentialsGrant\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[\"OAuth2ClientProperties\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Registration\"]}),\" registration \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" properties\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getRegistration\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"get\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"client-registration\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientID\"}),\" clientID \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientID\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"registration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getClientId\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Secret\"}),\" clientSecret \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Secret\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"registration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getClientSecret\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientAuthentication\"}),\" clientAuth \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"ClientSecretBasic\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"clientID\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" clientSecret\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Scope\"}),\" scope \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Scope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"registration\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getScope\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toArray\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"String\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsxs)(e.span,{className:\"token class-name\",children:[\"OAuth2ClientProperties\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Provider\"]}),\" provider \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" properties\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getProvider\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"get\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"client-registartion-provider\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"URI\"}),\" tokenEndpoint \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"URI\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"provider\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getTokenUri\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"TokenRequest\"}),\" request \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"TokenRequest\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"tokenEndpoint\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" clientAuth\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" clientGrant\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" scope\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"TokenResponse\"}),\" response \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"TokenResponse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"request\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toHTTPRequest\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"send\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"indicatesSuccess\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"TokenErrorResponse\"}),\" errorResponse \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toErrorResponse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"throw\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IllegalStateException\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"errorResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getErrorObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toString\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"AccessTokenResponse\"}),\" successResponse \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" response\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"toSuccessResponse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"AccessToken\"}),\" accessToken \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" successResponse\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getTokens\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getAccessToken\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"BearerAccessToken\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"accessToken\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"getValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\u6700\\u540E\\u8BA9\\u6211\\u4EEC\\u5C06\\u6388\\u6743\\u670D\\u52A1\\u548C\\u5BA2\\u6237\\u7AEF\\u670D\\u52A1\\u90FD\\u542F\\u52A8\\u5B8C\\u6210\\uFF0C\\u6D4F\\u89C8\\u5668\\u8BBF\\u95EE\",(0,n.jsx)(e.a,{href:\"http://127.0.0.1:8070/client/test\",children:\"http://127.0.0.1:8070/client/test\"}),\"\\u5C55\\u793A\\u6548\\u679C\\u3002\"]}),(0,n.jsxs)(e.h2,{id:\"\\u7ED3\\u8BBA\",children:[(0,n.jsx)(e.a,{href:\"#\\u7ED3\\u8BBA\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\u7ED3\\u8BBA\"]}),(0,n.jsx)(e.p,{children:\"OAuth 2.0 \\u52A8\\u6001\\u5BA2\\u6237\\u7AEF\\u6CE8\\u518C\\u6D41\\u7A0B\\u901A\\u8FC7API\\u7B80\\u5316\\u4E86\\u5BA2\\u6237\\u7AEF\\u7684\\u6CE8\\u518C\\u8FC7\\u7A0B\\uFF0C\\u6781\\u5927\\u5730\\u63D0\\u5347\\u4E86\\u81EA\\u52A8\\u5316\\u548C\\u53EF\\u6269\\u5C55\\u6027\\u3002\\u52A8\\u6001\\u6CE8\\u518C\\u7279\\u522B\\u9002\\u5408\\u5728\\u5FAE\\u670D\\u52A1\\u73AF\\u5883\\u4E2D\\u4F7F\\u7528\\uFF0C\\u5141\\u8BB8\\u670D\\u52A1\\u5728\\u521B\\u5EFA\\u6216\\u542F\\u52A8\\u65F6\\u81EA\\u52A8\\u6CE8\\u518C\\u5230\\u6388\\u6743\\u670D\\u52A1\\u5668\\u3002\"}),(0,n.jsxs)(e.p,{children:[\"\\u4E0E\\u5F80\\u5E38\\u4E00\\u6837\\uFF0C\\u672C\\u6587\\u4E2D\\u4F7F\\u7528\\u7684\\u6E90\\u4EE3\\u7801\\u53EF\",(0,n.jsx)(e.a,{href:\"https://github.com/ReLive27/spring-security-oauth2-sample/tree/main/oauth2-client-registration\",children:\"\\u5728 GitHub \\u4E0A\"}),\"\\u83B7\\u5F97\\u3002\"]})]})}}var C=f;return R;})();\n;return Component;","toc":[{"value":"什么是 OAuth 2.0 客户端自动注册？","url":"#什么是-oauth-20-客户端自动注册","depth":2},{"value":"客户端自动注册的典型场景","url":"#客户端自动注册的典型场景","depth":2},{"value":"动态客户端注册的流程","url":"#动态客户端注册的流程","depth":2},{"value":"1. 客户端发送注册请求","url":"#1-客户端发送注册请求","depth":3},{"value":"示例请求：","url":"#示例请求","depth":4},{"value":"2. 授权服务器验证请求","url":"#2-授权服务器验证请求","depth":3},{"value":"3. 授权服务器生成客户端凭证","url":"#3-授权服务器生成客户端凭证","depth":3},{"value":"4. 授权服务器返回注册响应","url":"#4-授权服务器返回注册响应","depth":3},{"value":"示例响应：","url":"#示例响应","depth":4},{"value":"5. 客户端使用注册信息","url":"#5-客户端使用注册信息","depth":3},{"value":"使用 Spring Authorization Server 实现动态客户端注册","url":"#使用-spring-authorization-server-实现动态客户端注册","depth":2},{"value":"项目依赖","url":"#项目依赖","depth":3},{"value":"配置授权服务器","url":"#配置授权服务器","depth":3},{"value":"配置注册客户端","url":"#配置注册客户端","depth":3},{"value":"自定义客户端元数据","url":"#自定义客户端元数据","depth":3},{"value":"使用 Spring Security OAuth2 Client 创建客户端服务","url":"#使用-spring-security-oauth2-client-创建客户端服务","depth":2},{"value":"客户端注册事件","url":"#客户端注册事件","depth":3},{"value":"结论","url":"#结论","depth":2}],"frontMatter":{"readingTime":{"text":"8 min read","minutes":7.505,"time":450300,"words":1501},"slug":"oauth2-dynamic-client-registration","fileName":"oauth2-dynamic-client-registration.mdx","title":"OAuth2.0 动态注册客户端","date":"2024-11-05T22:00:29.000Z","tags":["SpringSecurity","OAuth2"],"draft":false,"authors":["default"]}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.18,"time":10800,"words":36},"slug":["default"],"fileName":"default.md","name":"ReLive27","avatar":"../static/images/avatar.png","occupation":"中级软件工程师","date":null}],"prev":{"title":"OAuth2.0设备授权流程","date":"2024-10-04T20:32:29.000Z","tags":["SpringSecurity","OAuth2"],"draft":false,"authors":["default"],"slug":"oauth2-device-flow"},"next":{"title":"如何用 Vault 保护和管理 Spring Authorization Server JWT 密钥","date":"2024-11-05T22:32:29.000Z","tags":["SpringSecurity","OAuth2","HashiCorp Vault"],"draft":false,"authors":["default"],"slug":"oauth2-vault"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["oauth2-dynamic-client-registration"]},"buildId":"AH509NuGZf1cFgZuj9XBY","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>